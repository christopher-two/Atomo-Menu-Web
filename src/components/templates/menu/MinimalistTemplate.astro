---
import type { Menu } from "../../../domain/models/DigitalMenu";

interface Props {
  menu: Menu;
}

const { menu } = Astro.props;
---

<div
  class="minimalist-template bg-[#fcfcfc] min-h-screen text-[#111] py-12 md:py-24 px-5 md:px-12 font-sans relative overflow-x-hidden"
>
  <!-- Subtle Grid Background -->
  <div
    class="absolute inset-0 bg-[linear-gradient(to_right,#f0f0f0_1px,transparent_1px),linear-gradient(to_bottom,#f0f0f0_1px,transparent_1px)] bg-[size:4rem_4rem] opacity-40 pointer-events-none"
  >
  </div>

  <div class="max-w-4xl mx-auto relative z-10">
    <header class="mb-20 md:mb-32">
      <h1
        class="text-xs font-bold tracking-[0.2em] uppercase mb-6 md:mb-8 text-neutral-400"
      >
        {menu.name}
      </h1>
      <h2
        class="text-5xl sm:text-7xl md:text-8xl lg:text-9xl font-black uppercase leading-[0.85] tracking-tighter break-words"
      >
        {menu.description || "SELECTION"}
      </h2>
    </header>

    <section class="mb-20">
      {
        menu.categories?.map((category) => (
          <div class="mb-20">
            <div class="mb-16 flex items-center gap-4">
              <div class="w-3 h-3 bg-black rounded-full" />
              <h3 class="text-xl md:text-2xl font-bold uppercase tracking-tight">
                {category.name}
              </h3>
            </div>

            <div class="space-y-16 md:space-y-20">
              {category.dishes?.map((dish: any) => (
                <div class="dish-item group">
                  <div class="flex flex-col md:flex-row md:justify-between md:items-baseline gap-2 mb-3 md:mb-4 relative">
                    <h4 class="text-2xl md:text-4xl font-black uppercase tracking-tighter z-10 bg-[#fcfcfc] pr-4 group-hover:translate-x-2 transition-transform duration-300">
                      {dish.name}
                    </h4>
                    <div class="hidden md:block absolute left-0 right-0 top-[60%] border-b border-[#e5e5e5] -z-0" />
                    <span class="text-xl md:text-3xl font-bold whitespace-nowrap bg-[#fcfcfc] pl-4 z-10">
                      ${Number(dish.price).toFixed(2)}
                    </span>
                  </div>
                  <p class="text-gray-500 text-sm md:text-lg max-w-2xl leading-relaxed font-medium pl-1 md:pl-0">
                    {dish.description}
                  </p>
                </div>
              ))}
            </div>
          </div>
        ))
      }

      {
        menu.dishes?.filter((d: any) => !d.category_id).length > 0 && (
          <div class="mb-20">
            <div class="mb-16 flex items-center gap-4">
              <div class="w-3 h-3 bg-black rounded-full" />
              <h3 class="text-xl md:text-2xl font-bold uppercase tracking-tight">
                General
              </h3>
            </div>

            <div class="space-y-16 md:space-y-20">
              {menu.dishes
                ?.filter((d: any) => !d.category_id)
                .map((dish: any) => (
                  <div class="dish-item group">
                    <div class="flex flex-col md:flex-row md:justify-between md:items-baseline gap-2 mb-3 md:mb-4 relative">
                      <h4 class="text-2xl md:text-4xl font-black uppercase tracking-tighter z-10 bg-[#fcfcfc] pr-4 group-hover:translate-x-2 transition-transform duration-300">
                        {dish.name}
                      </h4>
                      <div class="hidden md:block absolute left-0 right-0 top-[60%] border-b border-[#e5e5e5] -z-0" />
                      <span class="text-xl md:text-3xl font-bold whitespace-nowrap bg-[#fcfcfc] pl-4 z-10">
                        ${Number(dish.price).toFixed(2)}
                      </span>
                    </div>
                    <p class="text-gray-500 text-sm md:text-lg max-w-2xl leading-relaxed font-medium pl-1 md:pl-0">
                      {dish.description}
                    </p>
                  </div>
                ))}
            </div>
          </div>
        )
      }
    </section>

    <footer
      class="mt-32 border-t border-black pt-8 flex justify-between items-end"
    >
      <div class="text-xs font-bold uppercase tracking-widest leading-loose">
        <p>Designed by</p>
        <p>Override</p>
      </div>
      <div class="text-xs font-bold uppercase tracking-widest opacity-30">
        &copy; {new Date().getFullYear()}
      </div>
    </footer>
  </div>
</div>

<style>
  @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800;900&display=swap");

  .minimalist-template {
    font-family: "Inter", sans-serif;
  }

  .tracking-tighter {
    letter-spacing: -0.06em;
  }
</style>
