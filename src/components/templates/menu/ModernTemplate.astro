---
import type { Menu } from "../../../domain/models/DigitalMenu";

interface Props {
  menu: Menu;
}

const { menu } = Astro.props;
---

<div
  data-preview="root"
  class="modern-template bg-[#f3f3f3] min-h-screen font-sans text-black relative"
>
  <div class="container mx-auto px-6 py-12 md:py-20 max-w-5xl">
    <header class="mb-16 md:mb-24">
      <h1
        data-preview="name"
        class="text-2xl md:text-3xl font-medium mb-6 md:mb-10 tracking-tight text-gray-500 uppercase"
      >
        {menu.name}
      </h1>
      <h2
        data-preview="description"
        class="text-6xl md:text-8xl lg:text-9xl font-bold uppercase leading-[0.85] tracking-tighter break-words text-transparent bg-clip-text bg-gradient-to-br from-black to-gray-600"
      >
        {menu.description || "SELECTION"}
      </h2>
    </header>

    <section>
      {
        menu.categories?.map((category) => (
          <div class="mb-16">
            <h3 class="text-xl md:text-2xl font-bold uppercase mb-10 tracking-wide border-b-2 border-black pb-4 inline-block">
              {category.name}
            </h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-12">
              {category.dishes?.map((dish: any) => (
                <div class="dish-item group relative">
                  <div class="absolute -left-4 top-0 bottom-0 w-[2px] bg-black scale-y-0 group-hover:scale-y-100 transition-transform origin-top duration-300" />

                  <div class="flex flex-col gap-2 mb-3">
                    <div class="flex justify-between items-baseline">
                      <h4 class="text-xl md:text-2xl font-extrabold uppercase tracking-tight group-hover:text-gray-700 transition-colors">
                        {dish.name}
                      </h4>
                      <span class="text-lg font-bold whitespace-nowrap bg-black text-white px-2 py-1 transform -rotate-2 group-hover:rotate-0 transition-transform duration-300">
                        ${Number(dish.price).toFixed(2)}
                      </span>
                    </div>
                  </div>
                  <p class="text-sm md:text-base text-gray-600 leading-relaxed font-medium">
                    {dish.description}
                  </p>
                </div>
              ))}
            </div>
          </div>
        ))
      }

      {
        (menu.dishes ?? [])?.filter((d: any) => !d.category_id).length > 0 && (
          <div class="mb-16">
            <h3 class="text-xl md:text-2xl font-bold uppercase mb-10 tracking-wide border-b-2 border-black pb-4 inline-block">
              Curated List
            </h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-12">
              {(menu.dishes ?? [])
                ?.filter((d: any) => !d.category_id)
                .map((dish: any) => (
                  <div class="dish-item group relative">
                    <div class="absolute -left-4 top-0 bottom-0 w-[2px] bg-black scale-y-0 group-hover:scale-y-100 transition-transform origin-top duration-300" />

                    <div class="flex flex-col gap-2 mb-3">
                      <div class="flex justify-between items-baseline">
                        <h4 class="text-xl md:text-2xl font-extrabold uppercase tracking-tight group-hover:text-gray-700 transition-colors">
                          {dish.name}
                        </h4>
                        <span class="text-lg font-bold whitespace-nowrap bg-black text-white px-2 py-1 transform -rotate-2 group-hover:rotate-0 transition-transform duration-300">
                          ${Number(dish.price).toFixed(2)}
                        </span>
                      </div>
                    </div>
                    <p class="text-sm md:text-base text-gray-600 leading-relaxed font-medium">
                      {dish.description}
                    </p>
                  </div>
                ))}
            </div>
          </div>
        )
      }
    </section>

    <footer
      class="mt-24 border-t border-gray-300 pt-8 flex flex-col md:flex-row justify-between items-center gap-4 text-sm font-bold text-gray-400 uppercase tracking-widest"
    >
      <span>Override Templates</span>
      <span>Est. {new Date().getFullYear()}</span>
    </footer>
  </div>
</div>

<style>
  @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800;900&display=swap");

  .modern-template {
    font-family: "Inter", sans-serif;
  }

  .tracking-tighter {
    letter-spacing: -0.05em;
  }
</style>
