---
import type { CV } from "../../../domain/models/CV";

interface Props {
  cv: CV;
}

const { cv } = Astro.props;
---

<div
  class="luxury-cv min-h-screen bg-[#050505] text-[#e5e5e5] py-20 px-4 md:px-12 relative overflow-hidden font-serif"
>
  {/* Background Effects */}
  <div
    class="absolute inset-0 opacity-[0.07] pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"
  >
  </div>
  <div
    class="absolute top-0 right-0 w-[500px] h-[500px] bg-[radial-gradient(circle_at_center,_#333_0%,_transparent_70%)] opacity-20 pointer-events-none"
  >
  </div>

  <div
    class="max-w-5xl mx-auto relative z-10 bg-[#0a0a0a]/80 backdrop-blur-md border border-white/5 p-8 md:p-16 shadow-2xl"
  >
    {/* Decorative Borders */}
    <div
      class="absolute top-4 left-4 w-16 h-16 border-t border-l border-[#D4AF37] opacity-60"
    >
    </div>
    <div
      class="absolute top-4 right-4 w-16 h-16 border-t border-r border-[#D4AF37] opacity-60"
    >
    </div>
    <div
      class="absolute bottom-4 left-4 w-16 h-16 border-b border-l border-[#D4AF37] opacity-60"
    >
    </div>
    <div
      class="absolute bottom-4 right-4 w-16 h-16 border-b border-r border-[#D4AF37] opacity-60"
    >
    </div>

    <header class="text-center mb-20">
      <span class="text-[#D4AF37] tracking-[0.4em] text-xs uppercase block mb-4"
        >Professional Profile</span
      >
      <h1
        class="text-5xl md:text-7xl font-serif text-white mb-8 uppercase tracking-[0.1em] font-light"
      >
        {cv.title}
      </h1>
      <div class="h-px w-24 bg-[#D4AF37] mx-auto mb-8"></div>
      {
        cv.professional_summary && (
          <p class="text-[#D4AF37]/80 text-xl italic font-light leading-relaxed max-w-3xl mx-auto">
            "{cv.professional_summary}"
          </p>
        )
      }
    </header>

    <section class="mb-20">
      <h2
        class="text-3xl text-center text-[#D4AF37] uppercase tracking-[0.2em] mb-12 font-light"
      >
        Experience
      </h2>
      <div class="space-y-16">
        {
          cv.experience?.map((exp, index) => (
            <article class="relative pl-8 md:pl-0">
              {/* Connecting Line Design */}
              <div class="hidden md:flex absolute left-1/2 top-0 bottom-0 w-px bg-gradient-to-b from-[#D4AF37]/50 to-transparent -translate-x-1/2" />

              <div
                class={`flex flex-col md:flex-row gap-8 md:gap-16 items-start ${index % 2 === 0 ? "" : "md:flex-row-reverse text-left md:text-right"}`}
              >
                <div
                  class={`md:w-1/2 ${index % 2 === 0 ? "md:text-right" : "md:text-left"}`}
                >
                  <h3 class="text-2xl text-white font-serif uppercase tracking-wider mb-2">
                    {exp.role}
                  </h3>
                  <div class="text-[#D4AF37] text-lg font-light italic mb-1">
                    {exp.company}
                  </div>
                  <span class="text-xs uppercase tracking-[0.15em] text-neutral-500">
                    {exp.start_date
                      ? new Date(exp.start_date).getFullYear()
                      : ""}{" "}
                    â€”{" "}
                    {exp.is_current
                      ? "Present"
                      : exp.end_date
                        ? new Date(exp.end_date).getFullYear()
                        : ""}
                  </span>
                </div>

                {/* Center Dot */}
                <div class="hidden md:block absolute left-1/2 top-2 w-3 h-3 bg-[#050505] border border-[#D4AF37] rotate-45 -translate-x-1/2 z-10" />

                <div class="md:w-1/2">
                  <p class="text-neutral-400 font-light leading-relaxed italic">
                    {exp.description}
                  </p>
                </div>
              </div>
            </article>
          ))
        }
      </div>
    </section>

    <div class="grid md:grid-cols-2 gap-16">
      {
        cv.education && cv.education.length > 0 && (
          <section>
            <h2 class="text-2xl text-center text-[#D4AF37] uppercase tracking-[0.2em] mb-10 font-light">
              Education
            </h2>
            <div class="space-y-8">
              {cv.education.map((edu) => (
                <div class="text-center p-6 border border-white/5 bg-[#0a0a0a]">
                  <h3 class="text-xl text-white font-serif mb-2">
                    {edu.institution}
                  </h3>
                  <p class="text-[#D4AF37] italic text-sm">{edu.degree}</p>
                </div>
              ))}
            </div>
          </section>
        )
      }

      {
        cv.skills && cv.skills.length > 0 && (
          <section>
            <h2 class="text-2xl text-center text-[#D4AF37] uppercase tracking-[0.2em] mb-10 font-light">
              Expertise
            </h2>
            <div class="flex flex-wrap justify-center gap-3">
              {cv.skills.map((skill) => (
                <span class="px-4 py-2 border border-[#D4AF37]/30 text-[#e5e5e5] text-sm tracking-widest uppercase hover:bg-[#D4AF37]/10 transition-colors">
                  {skill.name}
                </span>
              ))}
            </div>
          </section>
        )
      }
    </div>
  </div>
</div>

<style>
  @import url("https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&display=swap");
  .luxury-cv {
    font-family: "Cormorant Garamond", serif;
  }
  .luxury-cv h1,
  .luxury-cv h2,
  .luxury-cv h3 {
    font-family: "Cinzel", serif;
  }
</style>
