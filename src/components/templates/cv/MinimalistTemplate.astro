---
import type { CV } from "../../../domain/models/CV";

interface Props {
  cv: CV;
}

const { cv } = Astro.props;
---

<div
  class="minimalist-cv max-w-4xl mx-auto px-6 py-20 bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-50 font-sans"
>
  <header class="mb-20">
    <h1 class="text-5xl md:text-7xl font-light tracking-tight mb-6">
      {cv.title}
    </h1>
    {
      cv.professional_summary && (
        <p class="text-xl md:text-2xl text-neutral-500 font-light leading-relaxed max-w-2xl">
          {cv.professional_summary}
        </p>
      )
    }
  </header>

  <main class="grid grid-cols-1 md:grid-cols-[1fr_2fr] gap-12 md:gap-24">
    <aside class="space-y-16">
      {
        cv.skills && cv.skills.length > 0 && (
          <section>
            <h2 class="text-xs font-bold uppercase tracking-widest text-neutral-400 mb-8 border-t border-neutral-200 pt-4">
              Skills
            </h2>
            <div class="flex flex-wrap gap-2">
              {cv.skills.map((skill) => (
                <span class="inline-block px-3 py-1 bg-neutral-100 dark:bg-neutral-800 text-sm font-medium rounded-full">
                  {skill.name}
                </span>
              ))}
            </div>
          </section>
        )
      }

      {/* Contact info could go here if available in CV model */}
    </aside>

    <div class="space-y-20">
      {
        cv.experience && cv.experience.length > 0 && (
          <section>
            <h2 class="text-xs font-bold uppercase tracking-widest text-neutral-400 mb-12 border-t border-neutral-200 pt-4">
              Experience
            </h2>
            <div class="space-y-12">
              {cv.experience.map((exp) => (
                <div class="group">
                  <div class="flex flex-col md:flex-row md:items-baseline justify-between mb-2">
                    <h3 class="text-xl font-medium">{exp.role}</h3>
                    <span class="text-sm text-neutral-400 font-mono">
                      {exp.start_date
                        ? new Date(exp.start_date).getFullYear()
                        : ""}{" "}
                      -{" "}
                      {exp.is_current
                        ? "Present"
                        : exp.end_date
                          ? new Date(exp.end_date).getFullYear()
                          : ""}
                    </span>
                  </div>
                  <p class="text-lg text-neutral-500 mb-4">{exp.company}</p>
                  {exp.description && (
                    <p class="text-neutral-600 dark:text-neutral-400 leading-relaxed max-w-prose">
                      {exp.description}
                    </p>
                  )}
                </div>
              ))}
            </div>
          </section>
        )
      }

      {
        cv.education && cv.education.length > 0 && (
          <section>
            <h2 class="text-xs font-bold uppercase tracking-widest text-neutral-400 mb-12 border-t border-neutral-200 pt-4">
              Education
            </h2>
            <div class="space-y-8">
              {cv.education.map((edu) => (
                <div>
                  <div class="flex flex-col md:flex-row md:items-baseline justify-between mb-1">
                    <h3 class="text-lg font-medium">{edu.institution}</h3>
                    <span class="text-sm text-neutral-400 font-mono">
                      {edu.start_date
                        ? new Date(edu.start_date).getFullYear()
                        : ""}{" "}
                      -{" "}
                      {edu.is_current
                        ? "Present"
                        : edu.end_date
                          ? new Date(edu.end_date).getFullYear()
                          : ""}
                    </span>
                  </div>
                  <p class="text-neutral-500">{edu.degree}</p>
                </div>
              ))}
            </div>
          </section>
        )
      }
    </div>
  </main>
</div>
