---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Atomo — Plataforma" description="Crea perfiles, menús y tiendas con plantillas.">
  <div class="portfolio-viewport">
    <style>
      /* landing styles (keeps visual language from portfolio) */
      .landing-panel { display:flex; align-items:center; min-height:100vh; padding:2rem; box-sizing:border-box; color: #fff; position: relative; overflow: hidden; }
      .landing-bg { position:absolute; inset:0; background:linear-gradient(90deg, rgba(0,0,0,0.55), rgba(0,0,0,0.65)); backdrop-filter: blur(3px); z-index:0; }
      .landing-content { position:relative; z-index:10; max-width:1100px; }
      .landing-title { font-size: clamp(2.4rem, 10vw, 6rem); line-height:0.9; font-weight:900; margin:0 0 1rem; }
      .lead { color: #d1d5db; margin-bottom:1rem; max-width: 60ch; }
      .pricing-cards { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:1rem; margin-top:1rem; }
      .plan-card { background: rgba(255,255,255,0.03); padding:1rem; border-radius:8px; }
      .price { font-weight:800; font-size:1.4rem; margin:0.5rem 0; color:#fff; }
      .pricing-toggle { display:inline-flex; background:rgba(255,255,255,0.04); padding:0.25rem; border-radius:999px; }
      .toggle-btn { border:none; background:transparent; color:#ddd; padding:0.35rem 0.75rem; cursor:pointer; }
      .toggle-btn.active { background:#111; color:#fff; border-radius:999px; }
      .btn-primary { background: #fff; color:#000; padding:0.6rem 1rem; border-radius:6px; border:none; cursor:pointer; }
      .btn-ghost { color:#fff; text-decoration:underline; background:transparent; border:none; padding:0.5rem; }
      @media (max-width:768px) { .landing-panel { padding:1rem; } .pricing-cards { grid-template-columns: 1fr; } }
    </style>

    <div class="horizontal-wrapper" id="wrapper">
      <!-- Panel 1: Intro / Hero -->
      <section class="panel landing-panel" id="landing-root" tabindex="0">
        <div class="landing-bg" aria-hidden="true" data-speed="0.02"></div>

        <div class="landing-content" data-speed="-0.02">
          <h1 class="landing-title stagger-item">ATOMO — Tu sitio, en minutos</h1>
          <p class="lead stagger-item">Plataforma para crear perfiles, menús y tiendas con plantillas profesionales. Escala desde pruebas gratuitas hasta hosting con dominio propio.</p>

          <div class="landing-actions" style="display:flex;gap:.75rem;flex-wrap:wrap">
            <button id="cta-get-started" class="btn-primary stagger-item" data-speed="-0.04">Comenzar</button>
            <a href="/atomo/portfolio" class="btn-ghost stagger-item" style="align-self:center">Ver plantillas</a>
          </div>
        </section>

      <!-- Panel 2: Features -->
      <section class="panel" id="features" data-service="features" tabindex="0">
        <div class="panel-inner max-w-5xl px-6" data-speed="-0.01">
          <h2 class="title-huge stagger-item">Características</h2>
          <div class="grid features-grid stagger-item" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;margin-top:1.5rem;">
            <div class="feature-card">Flexible templates</div>
            <div class="feature-card">Hosting opcional</div>
            <div class="feature-card">Link in bio</div>
            <div class="feature-card">Integraciones</div>
          </div>
        </div>
      </section>

      <!-- Panel 3: Pricing -->
      <section class="panel" id="pricing" data-service="pricing" tabindex="0">
        <div class="panel-inner max-w-5xl px-6" data-speed="-0.02">
          <h2 class="title-huge stagger-item">Precios</h2>
          <div class="pricing-cards mt-4 stagger-item">
            <article class="plan-card" data-plan="free">
              <h4>FREE</h4>
              <div class="price">0 MXN</div>
            </article>
            <article class="plan-card" data-plan="core">
              <h4>CORE</h4>
              <div class="price">59 MXN / mes</div>
            </article>
            <article class="plan-card" data-plan="quantum">
              <h4>QUANTUM</h4>
              <div class="price">159 MXN / mes</div>
            </article>
          </div>
        </div>
      </section>

    </div>

    <script is:inline>
      (function () {
        // horizontal scroll mapping + parallax + stagger focus for landing
        const wrapper = document.getElementById('wrapper');
        const panels = Array.from(document.querySelectorAll('.panel'));
        const staggerItems = Array.from(document.querySelectorAll('.stagger-item'));
        const parallaxElements = Array.from(document.querySelectorAll('[data-speed]'));

        let current = 0; let target = 0; const ease = 0.08;
        let max = Math.max(0, wrapper.scrollWidth - window.innerWidth);

        window.addEventListener('resize', () => { max = Math.max(0, wrapper.scrollWidth - window.innerWidth); target = Math.min(target, max); });

        window.addEventListener('wheel', (e) => { target += e.deltaY; target = Math.max(0, Math.min(target, max)); });

        // touch
        let touchStartX = 0; let touching = false;
        window.addEventListener('touchstart', (e) => { touching = true; touchStartX = e.touches[0].clientX; }, { passive: true });
        window.addEventListener('touchmove', (e) => { if (!touching) return; const x = e.touches[0].clientX; const diff = touchStartX - x; target += diff * 1.2; target = Math.max(0, Math.min(target, max)); touchStartX = x; }, { passive: true });
        window.addEventListener('touchend', () => { touching = false; });

        function updateStagger() {
          const center = window.innerWidth / 2;
          staggerItems.forEach((el) => {
            const r = el.getBoundingClientRect();
            const mid = r.left + r.width / 2;
            const dist = Math.abs(mid - center);
            el.classList.toggle('is-active', dist < r.width * 0.35);
          });
        }

        function animate() {
          current += (target - current) * ease;
          wrapper.style.transform = `translate3d(-${current}px, 0, 0)`;
          parallaxElements.forEach((el) => { const s = parseFloat(el.getAttribute('data-speed') || '0'); el.style.transform = `translate3d(${ -current * s }px,0,0)`; });
          updateStagger();
          requestAnimationFrame(animate);
        }
        animate();
      })();
    </script>
  </div>
</Layout>
